(window["webpackJsonpladybird-ui"]=window["webpackJsonpladybird-ui"]||[]).push([[0],{52:function(e,t,a){e.exports=a.p+"static/media/logo.83c07097.png"},58:function(e,t,a){e.exports=a(90)},63:function(e,t,a){},64:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),i=a.n(o),c=(a(63),a(45)),l=a(46),s=a(54),m=a(47),u=a(55),d=a(18),h=(a(64),a(23)),p=a.n(h),g=a(27),E=a(48),f=a.n(E),v=a(105),b=a(106),w=a(49),y=a.n(w),x=a(28),k=a.n(x),_=Object(v.a)({container:{margin:"3vh auto"},text:{marginBottom:"2vh"}});function j(){var e=window.gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();return{id:e.getId(),first_name:e.getGivenName(),last_name:e.getFamilyName(),image_url:e.getImageUrl(),email_id:e.getEmail()}}var N=function(){var e=Object(g.a)(p.a.mark((function e(t,a,n){var r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=j(),e.next=3,k.a.post("http://localhost:4000/graphql",{query:"\n    mutation {\n      login{\n        login_status\n        register\n      }\n    }\n    "},{headers:{authorization:n.getAuthResponse().id_token}});case 3:o=e.sent,console.log(o.data),o.data.data.login.login_status&&window.location.replace("https://".concat(sessionStorage.getItem("redirectTo"),"?id=").concat(n.getAuthResponse().id_token)),o.data.data.register&&a.push({pathname:"register",state:{user:r,token:n.getAuthResponse().id_token}});case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),O=function(e){var t=e.history,a=e.location,n=(e.googleUser,_());return sessionStorage.setItem("redirectTo",y.a.parse(a.search).redirectTo||""),r.a.createElement(b.a,{className:n.container},r.a.createElement("div",{className:n.text},r.a.createElement("h3",null,"Welcome RC Lee Hallmate!"),r.a.createElement("h4",null,"To continue using our app, please sign in.")),r.a.createElement(f.a,{onSuccess:function(e){return N(a,t,e)},onSignIn:function(e){return N(a,t,e)},clientId:"798725565697-sfibjdadpcan9ks908dnl8p5k1dncmoq.apps.googleusercontent.com",cookiePolicy:"single_host_origin"}))},q=a(53),I=a(107),C=a(108),A=a(112),F=a(111),S=a(109),T=a(110),R=Object(v.a)({container:{margin:"3vh auto"},disclaimer:{margin:"1vmax"},form:{margin:"2vh auto"}}),B=function(e){var t=e.location,a=e.history,o=R(),i=Object(n.useState)({room:null,year:null}),c=Object(q.a)(i,2),l=c[0],s=c[1],m=function(e){l[e.target.id]=e.target.value,s(l)},u=function(){var e=Object(g.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("http://localhost:4000/graphql",{query:'\n      mutation{\n        register(\n          user: {\n            username: "'.concat(l.username,'"\n            phone: "').concat(l.phone,'"\n            room_no: "').concat(l.room,'"\n          }\n        ){\n          username\n        }\n      }\n      ')},{headers:{authorization:t.state.token}});case 2:null===e.sent.data.data.register?a.replace({location:"/"}):window.location.replace("https://".concat(sessionStorage.getItem("redirectTo"),"?id=").concat(t.state.token));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(void 0===t.state)return r.a.createElement(d.a,{to:"/"});t.state.token;var h=t.state.user;return r.a.createElement(b.a,{className:o.container},r.a.createElement("h3",null,"Hello, ".concat(h.first_name)),r.a.createElement("div",{className:o.disclaimer},"To continue using our services, we require you to sign in with Google, in which you have successfully completed that step. While we implicitly have access to your Google account information, other important details such as your room number are needed to provide the best experience.",r.a.createElement("br",null),"By submitting the form below, you agree that we are allowed to store your info in our database. We will not share your data with any other 3rd party applications and services."),r.a.createElement(I.a,{className:o.form},r.a.createElement(C.a,{required:!0},r.a.createElement(A.a,{htmlFor:"username"},"Username"),r.a.createElement(F.a,{id:"username","aria-describedby":"username-helper-text",onChange:m}),r.a.createElement(S.a,{id:"username-helper-text"},"For example: iamawesome")),r.a.createElement(C.a,{required:!0},r.a.createElement(A.a,{htmlFor:"phone"},"Phone (Hong Kong)"),r.a.createElement(F.a,{id:"phone","aria-describedby":"phone-helper-text",onChange:m}),r.a.createElement(S.a,{id:"phone-helper-text"},"For example: +85212345678")),r.a.createElement(C.a,{required:!0},r.a.createElement(A.a,{htmlFor:"room"},"Room number"),r.a.createElement(F.a,{id:"room","aria-describedby":"room-helper-text",onChange:m}),r.a.createElement(S.a,{id:"room-helper-text"},"For example: 924A")),r.a.createElement(T.a,{type:"submit",onClick:u},"Submit")))},W=a(52),H=a.n(W);var U=function(){return r.a.createElement(b.a,{className:"App-header"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://www.rctech.club",rel:"noopener noreferrer"},r.a.createElement("img",{className:"logo",src:H.a,alt:"RCTECH"}))),r.a.createElement("div",{className:"header-text"},"Ladybird"))},G=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(U,null),r.a.createElement("div",null,r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,component:O}),r.a.createElement(d.b,{path:"/register",exact:!0,component:B}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var P=a(26);i.a.render(r.a.createElement(P.a,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[58,1,2]]]);
//# sourceMappingURL=main.5b4c46db.chunk.js.map